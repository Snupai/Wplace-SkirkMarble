<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>tileManager.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ApiManager.html">ApiManager</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Observers.html">Observers</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Overlay.html">Overlay</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Template.html">Template</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="TemplateManager.html">TemplateManager</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module.exports_module.exports.html">exports</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#CACHE_STATS_KEY">CACHE_STATS_KEY</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#COLOR_PALETTE_MAP">COLOR_PALETTE_MAP</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addBr">addBr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addButton">addButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addButtonHelp">addButtonHelp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addCheckbox">addCheckbox</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addDiv">addDiv</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addHeader">addHeader</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addHr">addHr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addImg">addImg</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addInput">addInput</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addInputFile">addInputFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addP">addP</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addSmall">addSmall</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addTextarea">addTextarea</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#analyzeTileWithEnhancedLogic">analyzeTileWithEnhancedLogic</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#applyColorFilterToExistingTiles">applyColorFilterToExistingTiles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#applyCrosshairToWrongPixels">applyCrosshairToWrongPixels</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#applyHeaderVisibility">applyHeaderVisibility</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#applyMobileModeToColorFilter">applyMobileModeToColorFilter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#applyStoredOverlaySettings">applyStoredOverlaySettings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#applyTileRefreshPause">applyTileRefreshPause</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#base64ToUint8">base64ToUint8</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#buildColorFilterOverlay">buildColorFilterOverlay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#buildColorPaletteFromTileProgress">buildColorPaletteFromTileProgress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#buildCrosshairSettingsOverlay">buildCrosshairSettingsOverlay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#buildElement">buildElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#buildOverlay">buildOverlay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#buildOverlayMain">buildOverlayMain</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#buildOverlayTabTemplate">buildOverlayTabTemplate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#buildTemplateAreaScreenshot">buildTemplateAreaScreenshot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#calculateRemainingPixelsByColor">calculateRemainingPixelsByColor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#canvasPosToLatLng">canvasPosToLatLng</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearAllStorage">clearAllStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearColorMenuCache">clearColorMenuCache</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearFrozenTileCache">clearFrozenTileCache</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearSmartTileCache">clearSmartTileCache</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearTileProgressCache">clearTileProgressCache</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#colorpalette">colorpalette</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createEnhancedTiles">createEnhancedTiles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createJSON">createJSON</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createObserverBody">createObserverBody</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createTemplate">createTemplate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createTemplateTiles">createTemplateTiles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#debugLog">debugLog</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#deleteAllTemplates">deleteAllTemplates</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#deleteSelectedTemplate">deleteSelectedTemplate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#deleteTemplate">deleteTemplate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#detectWrongPixelsInTile">detectWrongPixelsInTile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#disableColor">disableColor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#disableColorEnhanced">disableColorEnhanced</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#downloadAllTemplatesJSON">downloadAllTemplatesJSON</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#downloadTemplateJSON">downloadTemplateJSON</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#drawTemplateOnTile">drawTemplateOnTile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#enableColor">enableColor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#enableColorEnhanced">enableColorEnhanced</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#escapeHTML">escapeHTML</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#evictLRUEntries">evictLRUEntries</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#exportAllTemplatesJSON">exportAllTemplatesJSON</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#exportTemplateJSON">exportTemplateJSON</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#findDuplicateTemplate">findDuplicateTemplate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#findWrongPixelCoordinates">findWrongPixelCoordinates</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#forceRefreshSingleTile">forceRefreshSingleTile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#forceTemplateRedraw">forceTemplateRedraw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#generateCacheKey">generateCacheKey</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getBorderEnabled">getBorderEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getCachedTileCount">getCachedTileCount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getCanvasStateHash">getCanvasStateHash</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getCollapseMinEnabled">getCollapseMinEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getCompactSort">getCompactSort</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getCoords">getCoords</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getCrosshairColor">getCrosshairColor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getCrosshairRadius">getCrosshairRadius</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getDebugLoggingEnabled">getDebugLoggingEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getDisabledColors">getDisabledColors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getDisplayedTemplatesInfo">getDisplayedTemplatesInfo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getDragModeEnabled">getDragModeEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEnhanceWrongColors">getEnhanceWrongColors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEnhancedColors">getEnhancedColors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEnhancedSizeEnabled">getEnhancedSizeEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getErrorMapEnabled">getErrorMapEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getErrorMapMode">getErrorMapMode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getFallbackSimulatedStats">getFallbackSimulatedStats</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getFromSmartCache">getFromSmartCache</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getIncludeWrongColorsInProgress">getIncludeWrongColorsInProgress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getMiniTrackerEnabled">getMiniTrackerEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getMobileMode">getMobileMode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getNavigationMethod">getNavigationMethod</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getObserverBody">getObserverBody</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getOverlayState">getOverlayState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getShowLeftOnColorEnabled">getShowLeftOnColorEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getSmartCacheStats">getSmartCacheStats</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getSmartDetectionEnabled">getSmartDetectionEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getSmartTileCacheEnabled">getSmartTileCacheEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getTemplateColorSort">getTemplateColorSort</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getTemplateDisabledColors">getTemplateDisabledColors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getTilePerformanceStats">getTilePerformanceStats</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getTileRefreshPaused">getTileRefreshPaused</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getTopBarEnabled">getTopBarEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getWrongPixelsForSelectedColors">getWrongPixelsForSelectedColors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#handleDisplayError">handleDisplayError</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#handleDisplayStatus">handleDisplayStatus</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#handleDrag">handleDrag</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#handleEKeyColorClick">handleEKeyColorClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#hasColorDataChanged">hasColorDataChanged</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#importFromObject">importFromObject</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#importJSON">importJSON</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#initColorMenuResize">initColorMenuResize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#initializeKeyboardShortcuts">initializeKeyboardShortcuts</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#initializeSmartTileCache">initializeSmartTileCache</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#initializeTileRefreshPause">initializeTileRefreshPause</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#inject">inject</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#invalidateCache">invalidateCache</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#invalidateCacheForSettingsChange">invalidateCacheForSettingsChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#invalidateEnhancedCache">invalidateEnhancedCache</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isColorDisabled">isColorDisabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isColorEnhanced">isColorEnhanced</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isColorWrongInTile">isColorWrongInTile</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#isEKeyPressed">isEKeyPressed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isTemplateEnabled">isTemplateEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isTileRefreshPaused">isTileRefreshPaused</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadWrongColorSettings">loadWrongColorSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#logCacheState">logCacheState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#negativeSafeModulo">negativeSafeModulo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#notifyCanvasChange">notifyCanvasChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#numberToEncoded">numberToEncoded</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#observe">observe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#observeBlack">observeBlack</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#observeOpacityButton">observeOpacityButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#performDeleteAllTemplates">performDeleteAllTemplates</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#refreshColorFilterOverlay">refreshColorFilterOverlay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#refreshTemplateDisplay">refreshTemplateDisplay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#removeDragHandlers">removeDragHandlers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#renameTemplate">renameTemplate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#restoreLastTemplateFile">restoreLastTemplateFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveBorderEnabled">saveBorderEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveCacheStatistics">saveCacheStatistics</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveCollapseMinEnabled">saveCollapseMinEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveCompactSort">saveCompactSort</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveCoords">saveCoords</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveCrosshairColor">saveCrosshairColor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveCrosshairRadius">saveCrosshairRadius</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveDebugLoggingEnabled">saveDebugLoggingEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveDragModeEnabled">saveDragModeEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveEnhancedSizeEnabled">saveEnhancedSizeEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveErrorMapEnabled">saveErrorMapEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveLastTemplateFile">saveLastTemplateFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveMiniTrackerEnabled">saveMiniTrackerEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveMobileMode">saveMobileMode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveNavigationMethod">saveNavigationMethod</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveOverlayState">saveOverlayState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveShowLeftOnColorEnabled">saveShowLeftOnColorEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveSmartDetectionEnabled">saveSmartDetectionEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveSmartTileCacheEnabled">saveSmartTileCacheEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveTemplateColorSort">saveTemplateColorSort</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveTileRefreshPaused">saveTileRefreshPaused</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveTopBarEnabled">saveTopBarEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveWrongColorSettings">saveWrongColorSettings</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#serverTPtoDisplayTP">serverTPtoDisplayTP</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setApiManager">setApiManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setDisabledColors">setDisabledColors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setEnhanceWrongColors">setEnhanceWrongColors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setEnhancedColors">setEnhancedColors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setErrorMapMode">setErrorMapMode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setIncludeWrongColorsInProgress">setIncludeWrongColorsInProgress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setSmartDetectionEnabled">setSmartDetectionEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTemplateDisabledColors">setTemplateDisabledColors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTemplateEnabled">setTemplateEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTemplatesShouldBeDrawn">setTemplatesShouldBeDrawn</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setupColorMenuFilters">setupColorMenuFilters</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showCustomConfirmDialog">showCustomConfirmDialog</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showImportDialog">showImportDialog</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showTemplateManageDialog">showTemplateManageDialog</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#showWrongPixelsDialog">showWrongPixelsDialog</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#smartTileCacheEnabled">smartTileCacheEnabled</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#spontaneousResponseListener">spontaneousResponseListener</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#storeInSmartCache">storeInSmartCache</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#tileRefreshPaused">tileRefreshPaused</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#toggleErrorMapMode">toggleErrorMapMode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#toggleSmartTileCache">toggleSmartTileCache</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#toggleTileRefreshPause">toggleTileRefreshPause</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#uint8ToBase64">uint8ToBase64</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateCacheAccess">updateCacheAccess</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateColorMenuCache">updateColorMenuCache</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateColorMenuDisplay">updateColorMenuDisplay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateColorMenuNumbers">updateColorMenuNumbers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateFullChargeDisplay">updateFullChargeDisplay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateFullChargeInfo">updateFullChargeInfo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateInnerHTML">updateInnerHTML</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateMiniTracker">updateMiniTracker</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updatePaletteLeftBadges">updatePaletteLeftBadges</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateTemplateWithColorFilter">updateTemplateWithColorFilter</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">tileManager.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @file Tile Management for handling tile refresh pausing and performance
 * Contains logic for managing tile updates and refresh behavior
 * @since 1.0.0
 */

import { debugLog } from './utils.js';
import { getTileRefreshPaused, saveTileRefreshPaused, getSmartTileCacheEnabled, saveSmartTileCacheEnabled } from './settingsManager.js';

/** Global state for tile refresh pausing */
let tileRefreshPaused = false;
let originalDrawTemplateOnTile = null;
let frozenTileCache = new Map(); // Cache de tiles com templates aplicados
let isCapturingState = false; // Flag para evitar recursão durante captura

/** Smart tile cache system for persistent performance improvement */
let smartTileCacheEnabled = true;
let smartTileCache = new Map(); // Persistent cache with LRU eviction
let cacheAccessOrder = new Map(); // Track access times for LRU
let cacheHits = 0;
let cacheMisses = 0;
let maxCacheSize = 500; // Increased cache size for better performance
let cacheVersion = '1.0'; // Version for cache invalidation
let lastCanvasChangeTime = 0; // Track when canvas was last modified

/** Cache statistics and management */
const CACHE_STATS_KEY = 'bmSmartTileCacheStats';
const CACHE_VERSION_KEY = 'bmSmartTileCacheVersion';

/** Notifies cache system that canvas has changed (pixels painted/modified)
 * Note: Cache no longer blocks real-time updates, so this is mainly for statistics
 * @since 1.0.0
 */
export function notifyCanvasChange() {
  lastCanvasChangeTime = Date.now();
  debugLog('[Tile Cache] Canvas change detected');
}

/** Gets a canvas state hash for cache invalidation
 * @returns {string} A simple hash representing canvas state
 * @since 1.0.0
 */
function getCanvasStateHash() {
  // Simple static hash - cache is now only used for storage, not blocking real-time updates
  return 'static';
}

/** Initializes the smart tile cache system
 * @since 1.0.0
 */
function initializeSmartTileCache() {
  smartTileCacheEnabled = getSmartTileCacheEnabled();
  
  // Check cache version and clear if outdated
  try {
    const storedVersion = localStorage.getItem(CACHE_VERSION_KEY);
    if (storedVersion !== cacheVersion) {
      debugLog('[Tile Cache] Version mismatch, clearing cache');
      clearSmartTileCache();
      localStorage.setItem(CACHE_VERSION_KEY, cacheVersion);
    }
    
    // Load cache statistics
    const stats = JSON.parse(localStorage.getItem(CACHE_STATS_KEY) || '{"hits":0,"misses":0}');
    cacheHits = stats.hits || 0;
    cacheMisses = stats.misses || 0;
    
    debugLog(`[Tile Cache] Initialized - Enabled: ${smartTileCacheEnabled}, Cache size: ${smartTileCache.size}`);
  } catch (error) {
    console.warn('Failed to initialize smart tile cache:', error);
    clearSmartTileCache();
  }
}

/** Generates a cache key for a tile based on coordinates, template state, and tile content
 * @param {Array&lt;number>|string} tileCoords - The tile coordinates
 * @param {Array} templateArray - Current templates for hash generation
 * @param {Blob} tileBlob - The tile blob to hash for content changes
 * @returns {string} Cache key
 * @since 1.0.0
 */
function generateCacheKey(tileCoords, templateArray, tileBlob) {
  // Format coordinates consistently
  const coordsKey = Array.isArray(tileCoords) ? 
    tileCoords[0].toString().padStart(4, '0') + ',' + tileCoords[1].toString().padStart(4, '0') : 
    tileCoords.toString();
  
  // Create a simple hash of active templates and their settings
  let templateHash = '';
  if (templateArray &amp;&amp; templateArray.length > 0) {
    templateHash = templateArray
      .filter(template => template.enabled !== false)
      .map(template => `${template.name || 'unnamed'}_${template.sortID || 0}`)
      .sort()
      .join('|');
  }
  
  // Create a simple hash of the tile content to detect canvas changes
  let contentHash = 'nodata';
  if (tileBlob &amp;&amp; tileBlob.size) {
    // Use blob size and type as a simple content signature
    // This will change when pixels are painted on the tile
    contentHash = `${tileBlob.size}_${tileBlob.type}`;
  }
  
  return `${coordsKey}_${templateHash}_${contentHash}`;
}

/** Updates LRU cache access order
 * @param {string} key - Cache key
 * @since 1.0.0
 */
function updateCacheAccess(key) {
  cacheAccessOrder.set(key, Date.now());
}

/** Evicts least recently used cache entries when cache is full
 * @since 1.0.0
 */
function evictLRUEntries() {
  if (smartTileCache.size &lt;= maxCacheSize) return;
  
  // Sort by access time and remove oldest entries
  const sortedEntries = Array.from(cacheAccessOrder.entries())
    .sort(([,a], [,b]) => a - b);
  
  const entriesToRemove = sortedEntries.slice(0, smartTileCache.size - maxCacheSize + 10);
  
  for (const [key] of entriesToRemove) {
    smartTileCache.delete(key);
    cacheAccessOrder.delete(key);
  }
  
    debugLog(`[Tile Cache] Evicted ${entriesToRemove.length} LRU entries, cache size now: ${smartTileCache.size}`);
}

/** Stores a processed tile in the smart cache
 * @param {string} cacheKey - The cache key
 * @param {*} processedTile - The processed tile data
 * @since 1.0.0
 */
function storeInSmartCache(cacheKey, processedTile) {
  if (!smartTileCacheEnabled) return;
  
  try {
    smartTileCache.set(cacheKey, processedTile);
    updateCacheAccess(cacheKey);
    evictLRUEntries();
    
    // Save cache statistics periodically
    if ((cacheHits + cacheMisses) % 50 === 0) {
      saveCacheStatistics();
    }
  } catch (error) {
    console.warn('Failed to store tile in smart cache:', error);
  }
}

/** Retrieves a tile from the smart cache
 * @param {string} cacheKey - The cache key
 * @returns {*|null} Cached tile data or null if not found
 * @since 1.0.0
 */
function getFromSmartCache(cacheKey) {
  if (!smartTileCacheEnabled) return null;
  
  if (smartTileCache.has(cacheKey)) {
    updateCacheAccess(cacheKey);
    cacheHits++;
    debugLog(`[Tile Cache] HIT for key: ${cacheKey.substring(0, 20)}...`);
    return smartTileCache.get(cacheKey);
  }
  
  cacheMisses++;
  debugLog(`[Tile Cache] MISS for key: ${cacheKey.substring(0, 20)}...`);
  return null;
}

/** Saves cache statistics to localStorage
 * @since 1.0.0
 */
function saveCacheStatistics() {
  try {
    const stats = { hits: cacheHits, misses: cacheMisses };
    localStorage.setItem(CACHE_STATS_KEY, JSON.stringify(stats));
  } catch (error) {
    console.warn('Failed to save cache statistics:', error);
  }
}

/** Clears the smart tile cache
 * @since 1.0.0
 */
function clearSmartTileCache() {
  smartTileCache.clear();
  cacheAccessOrder.clear();
  cacheHits = 0;
  cacheMisses = 0;
  saveCacheStatistics();
  debugLog('[Tile Cache] Cache cleared');
}

/** Gets cache statistics for display
 * @returns {Object} Cache statistics
 * @since 1.0.0
 */
export function getSmartCacheStats() {
  const hitRate = cacheHits + cacheMisses > 0 ? (cacheHits / (cacheHits + cacheMisses) * 100).toFixed(1) : '0.0';
  return {
    enabled: smartTileCacheEnabled,
    size: smartTileCache.size,
    maxSize: maxCacheSize,
    hits: cacheHits,
    misses: cacheMisses,
    hitRate: `${hitRate}%`
  };
}

/** Toggles smart tile cache on/off
 * @returns {boolean} New cache state
 * @since 1.0.0
 */
export function toggleSmartTileCache() {
  smartTileCacheEnabled = !smartTileCacheEnabled;
  saveSmartTileCacheEnabled(smartTileCacheEnabled);
  
  if (!smartTileCacheEnabled) {
    clearSmartTileCache();
  }
  
  debugLog(`[Tile Cache] Toggled ${smartTileCacheEnabled ? 'ON' : 'OFF'}`);
  return smartTileCacheEnabled;
}

/** Invalidates the tile cache when visual settings change
 * This ensures tiles are reprocessed when Map View or Enhanced modes change
 * @since 1.0.0
 */
export function invalidateCacheForSettingsChange() {
  if (smartTileCacheEnabled &amp;&amp; smartTileCache.size > 0) {
    debugLog('[Tile Cache] Invalidating cache due to visual settings change');
    clearSmartTileCache();
  }
}

/** Initializes the tile refresh pause system
 * @param {Object} templateManager - The template manager instance
 * @since 1.0.0
 */
export function initializeTileRefreshPause(templateManager) {
  // Initialize smart cache system first
  initializeSmartTileCache();
  
  // Load the saved pause state
  tileRefreshPaused = getTileRefreshPaused();
  
  // Store reference to original function and wrap it with smart caching
  if (!originalDrawTemplateOnTile) {
    originalDrawTemplateOnTile = templateManager.drawTemplateOnTile.bind(templateManager);
    
    // Wrap the original function with smart caching and freeze functionality
    templateManager.drawTemplateOnTile = async function(tileBlob, tileCoords) {
      // Generate cache key for smart cache
      const cacheKey = generateCacheKey(tileCoords, this.templatesArray, tileBlob);
      
      // Try to get from smart cache first (if enabled and not paused)
      if (!tileRefreshPaused &amp;&amp; smartTileCacheEnabled) {
        const cachedResult = getFromSmartCache(cacheKey);
        if (cachedResult) {
          return cachedResult;
        }
      }
      
      // Process tile with original function (cache miss or disabled)
      const result = await originalDrawTemplateOnTile(tileBlob, tileCoords);
      
      // Store in smart cache for future use
      if (!tileRefreshPaused &amp;&amp; !isCapturingState &amp;&amp; smartTileCacheEnabled) {
        storeInSmartCache(cacheKey, result);
        
        // Also store in frozen cache for pause functionality
        const tileKey = Array.isArray(tileCoords) ? 
          tileCoords[0].toString().padStart(4, '0') + ',' + tileCoords[1].toString().padStart(4, '0') : 
          tileCoords.toString();
        frozenTileCache.set(tileKey, result);
        
        // Limit frozen cache size to prevent memory issues
        if (frozenTileCache.size > 100) {
          const firstKey = frozenTileCache.keys().next().value;
          frozenTileCache.delete(firstKey);
        }
      }
      
      return result;
    };
  }
  
  // Apply the pause state
  applyTileRefreshPause(templateManager);
  
  debugLog('[Tile Manager] Initialized with cache and pause functionality. Paused:', tileRefreshPaused);
}

/** Applies the tile refresh pause setting to the template manager
 * @param {Object} templateManager - The template manager instance
 * @since 1.0.0
 */
function applyTileRefreshPause(templateManager) {
  if (tileRefreshPaused) {
    // Replace the drawTemplateOnTile function with a paused version that uses frozen cache
    templateManager.drawTemplateOnTile = function(tileBlob, tileCoords) {
      // Use the same formatting as the original function for consistency
      const tileKey = Array.isArray(tileCoords) ? 
        tileCoords[0].toString().padStart(4, '0') + ',' + tileCoords[1].toString().padStart(4, '0') : 
        tileCoords.toString();
      
      // Check if we have a cached version with templates applied
      if (frozenTileCache.has(tileKey)) {
        debugLog('🧊 [Tile Refresh Paused] Using frozen tile cache for:', tileKey);
        return frozenTileCache.get(tileKey);
      }
      
      // If no cache, return original blob (fallback)
      debugLog('⏸️ [Tile Refresh Paused] No cache for tile:', tileKey, '- returning original');
      return tileBlob;
    };
  } else {
    // When resuming, restore the wrapped function that continues smart caching
    if (originalDrawTemplateOnTile) {
      templateManager.drawTemplateOnTile = async function(tileBlob, tileCoords) {
        // Generate cache key for smart cache
        const cacheKey = generateCacheKey(tileCoords, this.templatesArray, tileBlob);
        
        // Try to get from smart cache first
        if (smartTileCacheEnabled) {
          const cachedResult = getFromSmartCache(cacheKey);
          if (cachedResult) {
            return cachedResult;
          }
        }
        
        // Process tile with original function (cache miss or disabled)
        const result = await originalDrawTemplateOnTile(tileBlob, tileCoords);
        
        // Store in smart cache for future use
        if (!tileRefreshPaused &amp;&amp; !isCapturingState &amp;&amp; smartTileCacheEnabled) {
          storeInSmartCache(cacheKey, result);
          
          // Also store in frozen cache for pause functionality
          const tileKey = Array.isArray(tileCoords) ? 
            tileCoords[0].toString().padStart(4, '0') + ',' + tileCoords[1].toString().padStart(4, '0') : 
            tileCoords.toString();
          frozenTileCache.set(tileKey, result);
          
          // Limit frozen cache size to prevent memory issues
          if (frozenTileCache.size > 100) {
            const firstKey = frozenTileCache.keys().next().value;
            frozenTileCache.delete(firstKey);
          }
        }
        
        return result;
      };
    }
  }
}

/** Logs the current state of the tile cache for debugging
 * @since 1.0.0
 */
function logCacheState() {
  debugLog(`🧊 [Tile Cache] Currently cached tiles: ${frozenTileCache.size}`);
  if (frozenTileCache.size > 0) {
    const keys = Array.from(frozenTileCache.keys()).slice(0, 5); // Show first 5 keys
    debugLog(`🧊 [Tile Cache] Sample cached tiles: ${keys.join(', ')}${frozenTileCache.size > 5 ? '...' : ''}`);
  }
}

/** Toggles the tile refresh pause state
 * @param {Object} templateManager - The template manager instance
 * @returns {boolean} The new pause state
 * @since 1.0.0
 */
export function toggleTileRefreshPause(templateManager) {
  if (!tileRefreshPaused) {
    // We're about to pause - log current cache state
    logCacheState();
    debugLog('🧊 [Freeze Tiles] Freezing current template view with cached tiles');
  } else {
    // We're about to resume - the cache will be used for new tiles
    debugLog('▶️ [Resume Tiles] Resuming live tile processing');
  }
  
  tileRefreshPaused = !tileRefreshPaused;
  
  // Save the new state
  saveTileRefreshPaused(tileRefreshPaused);
  
  // Apply the new state
  applyTileRefreshPause(templateManager);
  
  debugLog('⏸️ Tile refresh pause toggled. Now paused:', tileRefreshPaused);
  
  return tileRefreshPaused;
}

/** Gets the current tile refresh pause state
 * @returns {boolean} Whether tile refresh is currently paused
 * @since 1.0.0
 */
export function isTileRefreshPaused() {
  return tileRefreshPaused;
}

/** Forces a single tile refresh even when paused (for testing)
 * @param {Object} templateManager - The template manager instance
 * @param {File} tileBlob - The tile blob data
 * @param {Array&lt;number>} tileCoords - The tile coordinates
 * @returns {Promise&lt;File>} The processed tile blob
 * @since 1.0.0
 */
export async function forceRefreshSingleTile(templateManager, tileBlob, tileCoords) {
  if (originalDrawTemplateOnTile) {
    debugLog('Force Refresh - Processing single tile:', tileCoords);
    return await originalDrawTemplateOnTile(tileBlob, tileCoords);
  }
  return tileBlob;
}

/** Gets performance statistics for tile processing
 * @returns {Object} Performance stats including processed tiles count
 * @since 1.0.0
 */
export function getTilePerformanceStats() {
  return {
    paused: tileRefreshPaused,
    cachedTiles: frozenTileCache.size,
    message: tileRefreshPaused ? 
      `Tile processing is paused. ${frozenTileCache.size} tiles cached.` : 
      'Tile processing is active'
  };
}

/** Gets the number of tiles currently in the frozen cache
 * @returns {number} Number of cached tiles
 * @since 1.0.0
 */
export function getCachedTileCount() {
  return frozenTileCache.size;
}

/** Clears the frozen tile cache to free memory and ensure clean state
 * @since 1.0.0
 */
export function clearFrozenTileCache() {
  const previousSize = frozenTileCache.size;
  frozenTileCache.clear();
  debugLog(`Cleared frozen tile cache (${previousSize} tiles removed)`);
}</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Sat Oct 25 2025 18:15:41 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
